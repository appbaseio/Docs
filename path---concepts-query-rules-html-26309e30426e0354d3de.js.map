{"version":3,"sources":["webpack:///path---concepts-query-rules-html-26309e30426e0354d3de.js","webpack:///./.cache/json/concepts-query-rules-html.json"],"names":["webpackJsonp","404","module","exports","data","markdownRemark","html","frontmatter","title","next","prev","nextTitle","prevTitle","fields","path","slug","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,sisBAA41tBC,aAAqDC,MAAA,cAAAC,KAAA,yBAAAC,KAAA,uBAAAC,UAAA,oBAAAC,UAAA,mBAAkJC,QAAWC,KAAA,+BAAAC,KAAA,+BAA2EC,aAAgBD,KAAA","file":"path---concepts-query-rules-html-26309e30426e0354d3de.js","sourcesContent":["webpackJsonp([184659512712401],{\n\n/***/ 404:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"part-1-introduction\\\"><a href=\\\"#part-1-introduction\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 1: Introduction</h2>\\n<p>Query Rules are essentially <code class=\\\"gatsby-code-text\\\">If-This-Then-That</code> construct - <strong><em>If</em></strong> <strong>search query contains ‘Google’,</strong> <strong><em>then</em></strong>\\n<strong>promote ‘Chromebook’.</strong> Query Rules serve a very specific purpose as far as search results and merchandising is\\nconcerned. When building a commercial search product, customers more often than not require commercializing the product\\nbased on certain search queries.</p>\\n<p>One of the most common approach to achieve this is to <strong>promote</strong> or <strong>hide</strong> certain search results based on a given\\nquery. Query Rules automates this process by allowing users to curate <code class=\\\"gatsby-code-text\\\">If-This-Then-That</code> rules. For example, a user can\\ncreate a rule to <strong>promote</strong> an external document or result when a particular search query is fired. The rule is then\\ntriggered automatically whenever that search query is fired and appends the promoted document along with the search\\nresults. Similarly, a rule can be created that prevents i.e. <strong>hides</strong> certain results from getting included in the\\nactual search results.</p>\\n<h2 id=\\\"part-2-query-rules-using-dashboard\\\"><a href=\\\"#part-2-query-rules-using-dashboard\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 2: Query Rules using Dashboard</h2>\\n<p>The dashboard provides an intuitive way to create, manage and configure your Query Rules. In fact, you can visualize\\nand tune your search results while you are creating the rule. After the rule is created, you can always tweak it later\\nbased on your search and merchandising needs.</p>\\n<p>In order to create a Query Rule, select <code class=\\\"gatsby-code-text\\\">Query Rules</code> under <code class=\\\"gatsby-code-text\\\">Develop</code> on the dashboard’s navigation bar.</p>\\n<p><img src=\\\"https://i.imgur.com/uszkL7s.png\\\"></p>\\n<p>Creating a rule from dashboard is a two-step process. In the first step you configure the <strong><em>If</em></strong> condition of the rule.\\nQuery Rule currently supports four <code class=\\\"gatsby-code-text\\\">operators</code>:</p>\\n<ul>\\n<li><code class=\\\"gatsby-code-text\\\">is</code>: resembles the docs with <strong>exact</strong> query match</li>\\n<li><code class=\\\"gatsby-code-text\\\">starts_with</code>: resembles the docs that <strong>starts with</strong> the given query</li>\\n<li><code class=\\\"gatsby-code-text\\\">ends_with</code>: resembles the docs that <strong>ends with</strong> the given query</li>\\n<li><code class=\\\"gatsby-code-text\\\">contains</code>: resembles the docs that <strong>contains</strong> the given query</li>\\n</ul>\\n<p>For example: After the configuring this step, what we achieve is something similar to:\\n<strong><em>If</em></strong> <strong>search query contains ‘Google’</strong>, where the <code class=\\\"gatsby-code-text\\\">operator</code> is <code class=\\\"gatsby-code-text\\\">contains</code> and <code class=\\\"gatsby-code-text\\\">query</code> is <code class=\\\"gatsby-code-text\\\">Google</code>.</p>\\n<!-- If condition image -->\\n<p><img src=\\\"https://i.imgur.com/rzOq63Q.png\\\"></p>\\n<p>The second step consists of configuring of actions that are triggered when the <strong><em>If</em></strong> condition of the query is\\nmatched. Query Rule currently supports two <code class=\\\"gatsby-code-text\\\">actions</code>:</p>\\n<ul>\\n<li><code class=\\\"gatsby-code-text\\\">promote</code>: appends external docs or results along with the actual search results</li>\\n<li><code class=\\\"gatsby-code-text\\\">hide</code>: prevents certain results from getting included in the resturned search results</li>\\n</ul>\\n<!-- Then condition image each for promote and hide -->\\n<p><img src=\\\"https://i.imgur.com/biuc4SL.png\\\"></p>\\n<h2 id=\\\"part-3-query-rules-using-api\\\"><a href=\\\"#part-3-query-rules-using-api\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 3: Query Rules using API</h2>\\n<p>The dashboard provides an easier way to tune and visualize the query rules, however you can also manage them via API.\\nThe rule can be divided into two main segments:</p>\\n<ol>\\n<li><strong><em>If</em></strong> clause:</li>\\n</ol>\\n<p>The <strong>If</strong> clause comprises of both <code class=\\\"gatsby-code-text\\\">query</code> and <code class=\\\"gatsby-code-text\\\">operator</code>. Currently supported <code class=\\\"gatsby-code-text\\\">operators</code> are listed in the\\nsection above. Whenever a search query matches the <strong>If</strong> clause, it automatically triggers the <strong>Then</strong> clause of the\\nrule.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token punctuation\\\">.</span>\\n    <span class=\\\"token string\\\">\\\"if\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"query\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"operator\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li><strong><em>Then</em></strong> clause:</li>\\n</ol>\\n<p>The <strong>Then</strong> clause comprises of <code class=\\\"gatsby-code-text\\\">actions</code> that are to be executed when a rule is triggered. Currently supported\\n<code class=\\\"gatsby-code-text\\\">actions</code> are listed in the section above.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token operator\\\">...</span>\\n    <span class=\\\"token string\\\">\\\"then\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"promote\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                    <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n                <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hide\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">\\\"doc_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Jle44WgBnfYvZBcA0H66\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>A complete query rule may look similar to:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains_harry_potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"if\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"query\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"operator\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"then\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"promote\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                    <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n                <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hide\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">\\\"doc_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Jle44WgBnfYvZBcA0H66\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p><strong>Note</strong>: The rule <code class=\\\"gatsby-code-text\\\">id</code> is an optional field, in case it isn’t provided, it will be generated automatically\\nbased on the <code class=\\\"gatsby-code-text\\\">query</code> and <code class=\\\"gatsby-code-text\\\">operator</code>.</p>\\n<p>Now that we have constructed the <code class=\\\"gatsby-code-text\\\">rule</code> object, we can create the query rule by executing the following request:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-sh\\\"><code class=\\\"gatsby-code-sh\\\">curl --location --request POST &quot;https://accapi.appbase.io/app/book-store/rule&quot; \\\\\\n  --header &quot;Content-Type: application/json&quot; \\\\\\n  --data &#39;\\n{\\n    &quot;id&quot;: &quot;contains_harry_potter&quot;,\\n    &quot;if&quot;: {\\n        &quot;query&quot;: &quot;harry potter&quot;,\\n        &quot;operator&quot;: &quot;contains&quot;\\n    },\\n    &quot;then&quot;: {\\n        &quot;promote&quot;: [\\n            {\\n                &quot;id&quot;: &quot;harry_potter_cheat_sheet&quot;,\\n                &quot;name&quot;: &quot;Harry Potter&quot;,\\n                &quot;section_order&quot;: [\\n                    &quot;Books&quot;,\\n                    &quot;Movies&quot;,\\n                    &quot;Franchise&quot;\\n                ],\\n                &quot;template_type&quot;: &quot;reference&quot;\\n            }\\n        ],\\n        &quot;hide&quot;: [\\n            { &quot;doc_id&quot;: &quot;Jle44WgBnfYvZBcA0H66&quot; }\\n        ]\\n    }\\n}\\n&#39;</code></pre>\\n      </div>\\n<p>We can similarly add more rules and update or delete the existing query rules via API. Checkout the Query Rules REST\\nAPI <a href=\\\"https://documenter.getpostman.com/view/2848488/RW81vt5x#723b2a22-e515-4950-adec-ab3b64ccfcd7\\\">documentation</a> for\\nmore information.</p>\\n<h2 id=\\\"part-4-query-rules-responses\\\"><a href=\\\"#part-4-query-rules-responses\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 4: Query Rules Responses</h2>\\n<p>In order to run the search queries against the query rules, we need to pass in the query value in the <code class=\\\"gatsby-code-text\\\">X-Search-Query</code>\\nheader. For example:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-sh\\\"><code class=\\\"gatsby-code-sh\\\">curl -XGET https://${credentials}@scalr.api.appbase.io/movie-store/_msearch \\\\\\n  -H &#39;Content-Type: application/json&#39; \\\\\\n  -H &#39;X-Search-Query: harry potter&#39; \\\\\\n  -d &#39;\\n{\\n    &quot;query&quot;: {\\n        &quot;match&quot;: {\\n            &quot;original_title&quot;: &quot;harry potter&quot;\\n        }\\n    }\\n}\\n&#39;</code></pre>\\n      </div>\\n<p>The search query <code class=\\\"gatsby-code-text\\\">harry potter</code> subsequently matches the rule we created in the previous section. What happens is the\\n<strong>If</strong> clause i.e. <strong><em>If</em></strong> <strong>search query contains ‘harry potter’</strong> resolves to true, and so the <strong>Then</strong> clause is\\nsubsequently triggered. Our rule specifies two actions in the <strong>Then</strong> clause: <code class=\\\"gatsby-code-text\\\">promote</code> the given doc and <code class=\\\"gatsby-code-text\\\">hide</code> a\\nsearch result with <code class=\\\"gatsby-code-text\\\">{ &quot;doc_id&quot;: &quot;Jle44WgBnfYvZBcA0H66&quot; }</code>.</p>\\n<p>Therefore, both these actions get applied to the elasticsearch’s response to our original query. The <strong>promoted</strong>\\nresults will get appended under the <code class=\\\"gatsby-code-text\\\">promoted</code> field and the <strong>hidden</strong> results will be removed from the original\\nresults. An example <code class=\\\"gatsby-code-text\\\">search</code> response would look similar to this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"took\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">8</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"timed_out\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"_shards\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"failed\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"skipped\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"successful\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"total\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"hits\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"max_score\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">5.4339542</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"total\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hits\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"AWjmCtx674JxTt-e5Gzs\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_index\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"movie-store\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_score\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">4.480236</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_source\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token string\\\">\\\"genres\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"original_language\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"English\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"original_title\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter and the Deathly Hallows: Part 1\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"overview\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry, Ron and Hermione walk away from their last year at Hogwarts to find and destroy the remaining Horcruxes, putting an end to Voldemort's bid for immortality.\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"poster_path\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"https://image.tmdb.org/t/p/w185/maP4MTfPCeVD2FZbKTLUgriOW4R.jpg\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"release_year\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">2010</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"tagline\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"One Way… One Fate… One Hero.\\\"</span>\\n                <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"movies\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"promoted\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n        <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n            <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\",\"frontmatter\":{\"title\":\"Query Rules\",\"next\":\"role-based-access.html\",\"prev\":\"api-credentials.html\",\"nextTitle\":\"Role Based Access\",\"prevTitle\":\"API Credentials\"},\"fields\":{\"path\":\"docs/concepts/query-rules.md\",\"slug\":\"concepts/query-rules.html\"}}},\"pathContext\":{\"slug\":\"concepts/query-rules.html\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---concepts-query-rules-html-26309e30426e0354d3de.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h2 id=\\\"part-1-introduction\\\"><a href=\\\"#part-1-introduction\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 1: Introduction</h2>\\n<p>Query Rules are essentially <code class=\\\"gatsby-code-text\\\">If-This-Then-That</code> construct - <strong><em>If</em></strong> <strong>search query contains ‘Google’,</strong> <strong><em>then</em></strong>\\n<strong>promote ‘Chromebook’.</strong> Query Rules serve a very specific purpose as far as search results and merchandising is\\nconcerned. When building a commercial search product, customers more often than not require commercializing the product\\nbased on certain search queries.</p>\\n<p>One of the most common approach to achieve this is to <strong>promote</strong> or <strong>hide</strong> certain search results based on a given\\nquery. Query Rules automates this process by allowing users to curate <code class=\\\"gatsby-code-text\\\">If-This-Then-That</code> rules. For example, a user can\\ncreate a rule to <strong>promote</strong> an external document or result when a particular search query is fired. The rule is then\\ntriggered automatically whenever that search query is fired and appends the promoted document along with the search\\nresults. Similarly, a rule can be created that prevents i.e. <strong>hides</strong> certain results from getting included in the\\nactual search results.</p>\\n<h2 id=\\\"part-2-query-rules-using-dashboard\\\"><a href=\\\"#part-2-query-rules-using-dashboard\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 2: Query Rules using Dashboard</h2>\\n<p>The dashboard provides an intuitive way to create, manage and configure your Query Rules. In fact, you can visualize\\nand tune your search results while you are creating the rule. After the rule is created, you can always tweak it later\\nbased on your search and merchandising needs.</p>\\n<p>In order to create a Query Rule, select <code class=\\\"gatsby-code-text\\\">Query Rules</code> under <code class=\\\"gatsby-code-text\\\">Develop</code> on the dashboard’s navigation bar.</p>\\n<p><img src=\\\"https://i.imgur.com/uszkL7s.png\\\"></p>\\n<p>Creating a rule from dashboard is a two-step process. In the first step you configure the <strong><em>If</em></strong> condition of the rule.\\nQuery Rule currently supports four <code class=\\\"gatsby-code-text\\\">operators</code>:</p>\\n<ul>\\n<li><code class=\\\"gatsby-code-text\\\">is</code>: resembles the docs with <strong>exact</strong> query match</li>\\n<li><code class=\\\"gatsby-code-text\\\">starts_with</code>: resembles the docs that <strong>starts with</strong> the given query</li>\\n<li><code class=\\\"gatsby-code-text\\\">ends_with</code>: resembles the docs that <strong>ends with</strong> the given query</li>\\n<li><code class=\\\"gatsby-code-text\\\">contains</code>: resembles the docs that <strong>contains</strong> the given query</li>\\n</ul>\\n<p>For example: After the configuring this step, what we achieve is something similar to:\\n<strong><em>If</em></strong> <strong>search query contains ‘Google’</strong>, where the <code class=\\\"gatsby-code-text\\\">operator</code> is <code class=\\\"gatsby-code-text\\\">contains</code> and <code class=\\\"gatsby-code-text\\\">query</code> is <code class=\\\"gatsby-code-text\\\">Google</code>.</p>\\n<!-- If condition image -->\\n<p><img src=\\\"https://i.imgur.com/rzOq63Q.png\\\"></p>\\n<p>The second step consists of configuring of actions that are triggered when the <strong><em>If</em></strong> condition of the query is\\nmatched. Query Rule currently supports two <code class=\\\"gatsby-code-text\\\">actions</code>:</p>\\n<ul>\\n<li><code class=\\\"gatsby-code-text\\\">promote</code>: appends external docs or results along with the actual search results</li>\\n<li><code class=\\\"gatsby-code-text\\\">hide</code>: prevents certain results from getting included in the resturned search results</li>\\n</ul>\\n<!-- Then condition image each for promote and hide -->\\n<p><img src=\\\"https://i.imgur.com/biuc4SL.png\\\"></p>\\n<h2 id=\\\"part-3-query-rules-using-api\\\"><a href=\\\"#part-3-query-rules-using-api\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 3: Query Rules using API</h2>\\n<p>The dashboard provides an easier way to tune and visualize the query rules, however you can also manage them via API.\\nThe rule can be divided into two main segments:</p>\\n<ol>\\n<li><strong><em>If</em></strong> clause:</li>\\n</ol>\\n<p>The <strong>If</strong> clause comprises of both <code class=\\\"gatsby-code-text\\\">query</code> and <code class=\\\"gatsby-code-text\\\">operator</code>. Currently supported <code class=\\\"gatsby-code-text\\\">operators</code> are listed in the\\nsection above. Whenever a search query matches the <strong>If</strong> clause, it automatically triggers the <strong>Then</strong> clause of the\\nrule.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token punctuation\\\">.</span><span class=\\\"token punctuation\\\">.</span>\\n    <span class=\\\"token string\\\">\\\"if\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"query\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"operator\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li><strong><em>Then</em></strong> clause:</li>\\n</ol>\\n<p>The <strong>Then</strong> clause comprises of <code class=\\\"gatsby-code-text\\\">actions</code> that are to be executed when a rule is triggered. Currently supported\\n<code class=\\\"gatsby-code-text\\\">actions</code> are listed in the section above.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token operator\\\">...</span>\\n    <span class=\\\"token string\\\">\\\"then\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"promote\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                    <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n                <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hide\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">\\\"doc_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Jle44WgBnfYvZBcA0H66\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p>A complete query rule may look similar to:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains_harry_potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"if\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"query\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"operator\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"contains\\\"</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"then\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"promote\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                    <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n                <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hide\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span> <span class=\\\"token string\\\">\\\"doc_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Jle44WgBnfYvZBcA0H66\\\"</span> <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<p><strong>Note</strong>: The rule <code class=\\\"gatsby-code-text\\\">id</code> is an optional field, in case it isn’t provided, it will be generated automatically\\nbased on the <code class=\\\"gatsby-code-text\\\">query</code> and <code class=\\\"gatsby-code-text\\\">operator</code>.</p>\\n<p>Now that we have constructed the <code class=\\\"gatsby-code-text\\\">rule</code> object, we can create the query rule by executing the following request:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-sh\\\"><code class=\\\"gatsby-code-sh\\\">curl --location --request POST &quot;https://accapi.appbase.io/app/book-store/rule&quot; \\\\\\n  --header &quot;Content-Type: application/json&quot; \\\\\\n  --data &#39;\\n{\\n    &quot;id&quot;: &quot;contains_harry_potter&quot;,\\n    &quot;if&quot;: {\\n        &quot;query&quot;: &quot;harry potter&quot;,\\n        &quot;operator&quot;: &quot;contains&quot;\\n    },\\n    &quot;then&quot;: {\\n        &quot;promote&quot;: [\\n            {\\n                &quot;id&quot;: &quot;harry_potter_cheat_sheet&quot;,\\n                &quot;name&quot;: &quot;Harry Potter&quot;,\\n                &quot;section_order&quot;: [\\n                    &quot;Books&quot;,\\n                    &quot;Movies&quot;,\\n                    &quot;Franchise&quot;\\n                ],\\n                &quot;template_type&quot;: &quot;reference&quot;\\n            }\\n        ],\\n        &quot;hide&quot;: [\\n            { &quot;doc_id&quot;: &quot;Jle44WgBnfYvZBcA0H66&quot; }\\n        ]\\n    }\\n}\\n&#39;</code></pre>\\n      </div>\\n<p>We can similarly add more rules and update or delete the existing query rules via API. Checkout the Query Rules REST\\nAPI <a href=\\\"https://documenter.getpostman.com/view/2848488/RW81vt5x#723b2a22-e515-4950-adec-ab3b64ccfcd7\\\">documentation</a> for\\nmore information.</p>\\n<h2 id=\\\"part-4-query-rules-responses\\\"><a href=\\\"#part-4-query-rules-responses\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Part 4: Query Rules Responses</h2>\\n<p>In order to run the search queries against the query rules, we need to pass in the query value in the <code class=\\\"gatsby-code-text\\\">X-Search-Query</code>\\nheader. For example:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-sh\\\"><code class=\\\"gatsby-code-sh\\\">curl -XGET https://${credentials}@scalr.api.appbase.io/movie-store/_msearch \\\\\\n  -H &#39;Content-Type: application/json&#39; \\\\\\n  -H &#39;X-Search-Query: harry potter&#39; \\\\\\n  -d &#39;\\n{\\n    &quot;query&quot;: {\\n        &quot;match&quot;: {\\n            &quot;original_title&quot;: &quot;harry potter&quot;\\n        }\\n    }\\n}\\n&#39;</code></pre>\\n      </div>\\n<p>The search query <code class=\\\"gatsby-code-text\\\">harry potter</code> subsequently matches the rule we created in the previous section. What happens is the\\n<strong>If</strong> clause i.e. <strong><em>If</em></strong> <strong>search query contains ‘harry potter’</strong> resolves to true, and so the <strong>Then</strong> clause is\\nsubsequently triggered. Our rule specifies two actions in the <strong>Then</strong> clause: <code class=\\\"gatsby-code-text\\\">promote</code> the given doc and <code class=\\\"gatsby-code-text\\\">hide</code> a\\nsearch result with <code class=\\\"gatsby-code-text\\\">{ &quot;doc_id&quot;: &quot;Jle44WgBnfYvZBcA0H66&quot; }</code>.</p>\\n<p>Therefore, both these actions get applied to the elasticsearch’s response to our original query. The <strong>promoted</strong>\\nresults will get appended under the <code class=\\\"gatsby-code-text\\\">promoted</code> field and the <strong>hidden</strong> results will be removed from the original\\nresults. An example <code class=\\\"gatsby-code-text\\\">search</code> response would look similar to this:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"gatsby-code-jsx\\\"><code class=\\\"gatsby-code-jsx\\\"><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"took\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">8</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"timed_out\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"_shards\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"failed\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"skipped\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"successful\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"total\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"hits\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"max_score\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">5.4339542</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"total\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">3</span><span class=\\\"token punctuation\\\">,</span>\\n        <span class=\\\"token string\\\">\\\"hits\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n            <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token string\\\">\\\"_id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"AWjmCtx674JxTt-e5Gzs\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_index\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"movie-store\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_score\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">4.480236</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_source\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                    <span class=\\\"token string\\\">\\\"genres\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"original_language\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"English\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"original_title\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter and the Deathly Hallows: Part 1\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"overview\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry, Ron and Hermione walk away from their last year at Hogwarts to find and destroy the remaining Horcruxes, putting an end to Voldemort's bid for immortality.\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"poster_path\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"https://image.tmdb.org/t/p/w185/maP4MTfPCeVD2FZbKTLUgriOW4R.jpg\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"release_year\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">2010</span><span class=\\\"token punctuation\\\">,</span>\\n                    <span class=\\\"token string\\\">\\\"tagline\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"One Way… One Fate… One Hero.\\\"</span>\\n                <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"movies\\\"</span>\\n            <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">]</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span>\\n    <span class=\\\"token string\\\">\\\"promoted\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n        <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token string\\\">\\\"id\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"harry_potter_cheat_sheet\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"name\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"Harry Potter\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"section_order\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n                <span class=\\\"token string\\\">\\\"Books\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"Movies\\\"</span><span class=\\\"token punctuation\\\">,</span>\\n                <span class=\\\"token string\\\">\\\"Franchise\\\"</span>\\n            <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n            <span class=\\\"token string\\\">\\\"template_type\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"reference\\\"</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\",\"frontmatter\":{\"title\":\"Query Rules\",\"next\":\"role-based-access.html\",\"prev\":\"api-credentials.html\",\"nextTitle\":\"Role Based Access\",\"prevTitle\":\"API Credentials\"},\"fields\":{\"path\":\"docs/concepts/query-rules.md\",\"slug\":\"concepts/query-rules.html\"}}},\"pathContext\":{\"slug\":\"concepts/query-rules.html\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/concepts-query-rules-html.json\n// module id = 404\n// module chunks = 184659512712401"],"sourceRoot":""}